/*! project |  04-01-2016 */
var myApp=angular.module("myApp",["ui.router"]);myApp.config(function(a,b){b.otherwise("/"),a.state("person-list",{url:"/person-list",templateUrl:"partials/person_list.html",controller:"PersonController"}).state("create-person",{url:"/create-person",templateUrl:"partials/edit_person.html",controller:"editPersonController"}).state("edit-person",{url:"/edit-person/:personId",templateUrl:"partials/edit_person.html",controller:"editPersonController"}).state("delete-person",{url:"/delete-person/:personId",controller:"deletePersonController"})});var myApp=angular.module("myApp");myApp.controller("PersonController",function(a,b){b.getPersons().then(function(b){a.persons=b.message})}),myApp.controller("deletePersonController",function(a,b,c,d,e){c.deletePerson(b.personId).then(function(a){a?e.error("error handler message"):d.path("person-list")})}),myApp.controller("editPersonController",function(a,b,c,d){b.personId?(a.newPerson=!0,c.getPerson(b.personId).then(function(b){a.person=b})):(a.newPerson=!1,a.person={firstName:"",lastName:""}),a.update=function(b){if(b.id){b.id;c.savePerson(b).then(function(b){b.errors?(a.errors=b.errors,a.company.id=companyId):d.path("person-list")})}else c.createPerson(b).then(function(b){b.errors?a.errors=b.message:d.path("person-list")})}});var myApp=angular.module("myApp");myApp.factory("PersonService",function(a,b,c){return{getPersons:function(){return a({url:"http://localapi.com/person/getAll",method:"GET"}).then(function(a){return a.data})},deletePerson:function(b){return a({url:"http://localapi.com/person/delete/",method:"DELETE",params:{id:b}}).then(function(a){return a.data})},getPerson:function(b){return a({headers:{"Content-Type":"application/json"},url:"http://localapi.com/person/get",method:"GET",data:{id:b}}).then(function(a){return a.data})},savePerson:function(b){b.id;return delete b.id,a({url:"http://localapi.com/person/update",params:angular.toJson(company)}).then(function(a){return a.data})},createPerson:function(b){return a({headers:{"Content-Type":"application/json"},url:"http://localapi.com/person/add",method:"POST",data:angular.toJson(b)}).then(function(a){return a.data})}}});